(this["webpackJsonplwt.web"]=this["webpackJsonplwt.web"]||[]).push([[8],{261:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"h",(function(){return g})),n.d(t,"g",(function(){return j}));var a=n(274),r=n.n(a);const l={Skipped:"skipped",Ignored:"ignored",UnKnow:"unknown",Learning1:"learning-1",Learning2:"learning-2",Learning3:"learning-3",Learning4:"learning-4",Learning5:"learning-5",WellKnow:"well-known"},i=[l.UnKnow,l.Learning1,l.Learning2,l.Learning3,l.Learning4,l.Learning5],c={English:"en"},s={[l.Skipped]:r.a.termSkipped,[l.Ignored]:r.a.termIgnored,[l.UnKnow]:r.a.termUnknown,[l.Learning1]:r.a.termLearning1,[l.Learning2]:r.a.termLearning2,[l.Learning3]:r.a.termLearning3,[l.Learning4]:r.a.termLearning4,[l.Learning5]:r.a.termLearning5,[l.WellKnow]:r.a.termWellKnown},o={[l.Skipped]:"S",[l.Ignored]:"I",[l.UnKnow]:"UK",[l.Learning1]:"I",[l.Learning2]:"II",[l.Learning3]:"II",[l.Learning4]:"IV",[l.Learning5]:"V",[l.WellKnow]:"WK"},d=e=>{switch(e){case l.UnKnow:return l.Learning1;case l.Learning1:return l.Learning2;case l.Learning2:return l.Learning3;case l.Learning3:return l.Learning4;case l.Learning4:return l.Learning5;case l.Learning5:return l.WellKnow;default:return e}},u=e=>{switch(e){case l.UnKnow:return l.Ignored;case l.Learning1:return l.UnKnow;case l.Learning2:return l.Learning1;case l.Learning3:return l.Learning2;case l.Learning4:return l.Learning3;case l.Learning5:return l.Learning4;case l.WellKnow:return l.Learning5;default:return e}},g=e=>i.includes(e),j=["#E50027","#E5000F","#E50800","#E52000","#E53800","#E55000","#E56800","#E68000","#E69701","#E6AF01","#E6C701","#E6DF01","#D6E601","#BEE701","#A7E701","#8FE702","#77E702","#60E702","#48E702","#31E802","#19E802","#02E803","#03E81B","#03E833","#03E84B","#03E963","#03E97B","#03E993","#03E9AB","#04E9C3","#04E9DB","#04E0EA","#04C9EA","#04B1EA","#0499EA","#0482EA","#056AEA","#0553EB","#053BEB","#0523EB","#050CEB","#1705EB","#2F05EB","#4706EC","#5F06EC","#7706EC","#8F06EC","#A706EC","#BF06EC","#D707ED"]},274:function(e,t,n){e.exports={term:"Term_term__2-NZg",termCount:"Term_termCount__DM8Pp",termIgnored:"Term_termIgnored__1hr4Y",termSkipped:"Term_termSkipped__KPHim",termUnknown:"Term_termUnknown__1mQqj",termLearning1:"Term_termLearning1__y3Qmv",termLearning2:"Term_termLearning2__1Z9Ke",termLearning3:"Term_termLearning3__2rFg-",termLearning4:"Term_termLearning4__2oG1C",termLearning5:"Term_termLearning5__1dCC7",termWellKnown:"Term_termWellKnown__2X013",termLearned:"Term_termLearned__1HaXE",termLearning:"Term_termLearning__3OKz8",bookmark:"Term_bookmark__2vKqX"}},278:function(e,t,n){"use strict";var a=n(578),r=n(572),l=n(569),i=n(253),c=(n(0),n(263)),s=n.n(c),o=n(39),d=n(283),u=n.n(d),g=n(3);t.a=Object(o.b)((e=>({languages:e.language.languages})))((e=>{let{languages:t,value:n="",onChange:c,disabled:o=!1,className:d,name:j}=e;const b=s()(d,u.a.select);return Object(g.jsxs)(a.a,{variant:"outlined",className:b,children:[Object(g.jsx)(r.a,{id:"language-select-label",children:"Language"}),Object(g.jsx)(l.a,{labelId:"language-select-label",onChange:c,label:"Language",value:n,color:"primary",name:j,disabled:o||!1,children:t.map((e=>Object(g.jsx)(i.a,{value:e.code,children:e.name},e.code)))})]})}))},283:function(e,t,n){e.exports={select:"LanguageSelect_select__2dF_z"}},294:function(e,t,n){"use strict";var a=n(0);t.a=(e,t)=>{const n=Object(a.useRef)(!1);Object(a.useEffect)((()=>{n.current?e():n.current=!0}),t)}},316:function(e,t,n){"use strict";var a=n(278);t.a=a.a},418:function(e,t,n){e.exports={titleInput:"TextFilterForm_titleInput__2_dHl"}},424:function(e,t,n){e.exports={learning:"TextPage_learning__3nZkA",table:"TextPage_table__1dga4",row:"TextPage_row__1svE0",editButton:"TextPage_editButton__87bGs",deleteButton:"TextPage_deleteButton__1dqA7",actionButton:"TextPage_actionButton__dKcMY",termNumber:"TextPage_termNumber__14Hs8"}},425:function(e,t,n){e.exports={title:"TextsTable_title__2FdZf"}},566:function(e,t,n){"use strict";n.r(t);var a=n(254),r=n(567),l=n(0),i=n.n(l),c=n(39),s=n(76),o=n(32),d=n(387),u=n(316),g=n(418),j=n.n(g),b=n(280),x=n(294),m=n(3);let h=null;const O=e=>{let{onFilterChange:t,values:n}=e;return Object(m.jsx)(b.d,{initialValues:{title:n.title,languageCode:n.languageCode},onSubmit:()=>{},children:e=>{let{values:n,handleChange:a}=e;return Object(m.jsx)(C,{values:n,handleChange:a,onFilterChange:t})}})},C=e=>{let{values:t,onFilterChange:n,handleChange:a}=e;return Object(x.a)((()=>{clearTimeout(h),h=setTimeout((()=>{n({languageCode:t.languageCode,title:t.title})}),500)}),[t.languageCode,t.title,n]),Object(m.jsxs)(b.c,{children:[Object(m.jsx)(u.a,{name:"languageCode",value:t.languageCode,onChange:a}),Object(m.jsx)(d.a,{name:"title",variant:"outlined",margin:"dense",label:"Title",className:j.a.titleInput,value:t.title,placeholder:"Title",onChange:a}),Object(m.jsx)("hr",{})]})};O.defaultProps={};var v=O,p=n(252),f=n(258),L=n(579),E=n(278);var _=Object(c.b)((e=>({currentLanguage:e.language.currentLanguage})))((e=>{let{currentLanguage:t,formRef:n,onSubmit:r,submitting:l,onCancel:i}=e;return Object(m.jsx)(b.d,{initialValues:{languageCode:t,title:"",content:""},onSubmit:r,innerRef:n,children:e=>{let{handleChange:t,values:n}=e;return Object(m.jsxs)(b.c,{onSubmit:r,children:[Object(m.jsx)(E.a,{name:"languageCode",onChange:t,value:n.languageCode}),Object(m.jsx)(b.a,{name:"languageCode",component:"div"}),Object(m.jsx)(d.a,{variant:"outlined",name:"title",value:n.title,onChange:t,label:"Title",placeholder:"Title",style:{width:"100%"}}),Object(m.jsx)(d.a,{onChange:t,variant:"outlined",label:"Content",name:"content",value:n.content,multiline:!0,rows:10,maxRows:20,style:{width:"100%"},placeholder:"Please input text content here ..."}),Object(m.jsxs)("div",{style:{display:"flex",margin:"1rem 0 0 0",justifyContent:"space-between"},children:[Object(m.jsx)(a.a,{disabled:l,onClick:i,color:"secondary",variant:"contained",children:"Cancel"}),Object(m.jsx)(a.a,{disabled:l,type:"submit",color:"primary",variant:"contained",children:"Add"})]})]})}})}));var w=Object(c.b)(null,{createText:o.o})((e=>{let{createText:t,hide:n,onCreate:a,visible:r}=e;const l=i.a.useRef(null),[c,s]=i.a.useState(!1);return Object(m.jsx)(p.a,{open:r,children:Object(m.jsx)("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:Object(m.jsxs)(f.a,{style:{padding:"1rem",width:"90vw"},children:[Object(m.jsx)(L.a,{style:{textAlign:"center"},children:"Add new text"}),Object(m.jsx)(_,{onSubmit:e=>{e.preventDefault();const r=l.current;if(!r)throw new Error;r.validateForm(r.values).then((e=>{0===Object.keys(e).length&&(s(!0),t(r.values).then((()=>{a(),s(!1),r.resetForm(),n()})))}))},submitting:c,onCancel:()=>{const e=l.current;if(!e)throw new Error;e.resetForm(),n()},formRef:l})]})})})}));var T=Object(c.b)((e=>({currentLanguage:e.language.currentLanguage})),null)((e=>{const{editDetail:t,formRef:n,onSubmit:r,onCancel:l,submitting:i}=e;return Object(m.jsx)(b.d,{onSubmit:r,innerRef:n,initialValues:{title:t.title,languageCode:t.languageCode,content:t.content},children:e=>{let{values:t,handleChange:n}=e;return Object(m.jsxs)(b.c,{children:[Object(m.jsx)(E.a,{value:t.languageCode,name:"languageCode",onChange:n}),Object(m.jsx)(d.a,{name:"title",variant:"outlined",onChange:n,value:t.title,label:"Title",style:{width:"100%",marginTop:"1rem"},placeholder:"Title"}),Object(m.jsx)(d.a,{style:{width:"100%",marginTop:"1rem"},name:"content",value:t.content,onChange:n,variant:"outlined",label:"Content",multiline:!0,maxRows:20,minRows:10,placeholder:"Please input text content here ..."}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(m.jsx)(a.a,{disabled:i,variant:"contained",color:"secondary",onClick:l,children:"Cancel"}),Object(m.jsx)(a.a,{disabled:i,variant:"contained",color:"primary",type:"submit",children:"Save"})]})]})}})}));const y=e=>e.text.editDetail;var k=Object(c.b)((e=>({editDetail:y(e)})),{editText:o.q,getEditDetail:o.u})((e=>{let{visible:t,editDetail:n,hide:a,editingText:r,getEditDetail:l,editText:c,onEdit:s}=e;const[o,d]=i.a.useState(!1);i.a.useEffect((()=>{r&&l(r)}),[r]),i.a.useEffect((()=>{n||a()}),[n]);const u=i.a.useRef(null);if(!n)return null;return Object(m.jsx)(p.a,{open:t,title:"Edit text",children:Object(m.jsx)("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(m.jsx)(f.a,{style:{width:"90vw",padding:"1rem"},children:Object(m.jsx)(T,{onSubmit:()=>{const e=u.current;d(!0),null===e||void 0===e||e.validateForm(null===e||void 0===e?void 0:e.values).then((t=>{0===Object.keys(t).length&&c(r,null===e||void 0===e?void 0:e.values).then((()=>{s(),d(!1),null===e||void 0===e||e.resetForm(),a()}))}))},onCancel:()=>{const e=u.current;null===e||void 0===e||e.resetForm(),a()},editDetail:n,formRef:u,submitting:o})})})})}));var I=n(585),S=n(589),F=n(588),P=n(584),K=n(586),B=n(587),A=n(389),D=n(419),U=n.n(D),W=n(420),N=n.n(W),R=n(421),M=n.n(R),q=n(257),H=n(423),V=n.n(H),z=n(580),Z=n(562),X=n(581),G=n(582),J=n(583),Q=n(422),Y=n.n(Q);var $=Object(c.b)(((e,t)=>{const n=e.text.texts.find((e=>e.id===t.textId));if(!n)throw new Error;return{text:n}}),{deleteText:o.p})((e=>{let{text:t,deleteText:n}=e;const[r,l]=i.a.useState(!1),[c,s]=i.a.useState(!1),o=()=>{l(!1)};return Object(m.jsxs)("div",{children:[Object(m.jsx)(q.a,{color:"secondary",onClick:()=>{l(!0)},size:"large",children:Object(m.jsx)(Y.a,{})}),Object(m.jsxs)(z.a,{open:r,onClose:o,children:[Object(m.jsx)(Z.a,{children:"Are you sure to delete this text forever ?"}),Object(m.jsx)(X.a,{children:Object(m.jsx)(G.a,{children:t.title})}),Object(m.jsxs)(J.a,{children:[Object(m.jsx)(a.a,{variant:"contained",autoFocus:!0,disabled:c,onClick:o,color:"primary",children:"Cancel"}),Object(m.jsx)(a.a,{variant:"contained",disabled:c,onClick:()=>{s(!0),n(t.id).then((()=>{s(!1),o()}))},color:"secondary",autoFocus:!0,children:"Delete"})]})]})]})}));var ee=e=>{let{onEdit:t,text:{id:n}}=e;return Object(m.jsxs)("span",{children:[Object(m.jsx)($,{textId:n}),Object(m.jsx)(q.a,{color:"primary",onClick:()=>t(n),size:"large",children:Object(m.jsx)(V.a,{})})]})},te=n(13);var ne=function(e){const{text:t}=e,n=Object(te.f)();let r=0;return 0===t.termCount?Object(m.jsx)("span",{children:"-"}):(t.bookmark&&0!==t.bookmark&&(r=Math.floor(t.bookmark/t.termCount*1e4)/100),Object(m.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},children:[Object(m.jsx)("div",{children:"".concat(r,"%")}),Object(m.jsx)(a.a,{variant:"contained",color:"primary",onClick:()=>n.push("/text/read/".concat(t.id)),children:"Read"})]}))},ae=n(263),re=n.n(ae),le=n(261),ie=n(424),ce=n.n(ie);var se=e=>{const{text:t,learningLevel:n}=e,{counts:a}=t;if(!a)return Object(m.jsx)("div",{style:{minWidth:"2rem"},children:"-"});const r=a[n];if(!r)return Object(m.jsx)("div",{style:{minWidth:"2rem"},children:"0"});const l=t.termCount-a[le.c.Ignored]-a[le.c.Skipped],i=re()(ce.a.termNumber,le.b[n]);return Object(m.jsxs)("div",{className:i,children:["".concat(r),Object(m.jsx)("br",{}),"~",Object(m.jsx)("br",{}),"".concat(Math.round(r/l*100),"%")]})};var oe=Object(c.b)(null,{getTermCount:o.s,getProcessedTermCount:o.r})((e=>{let{text:t,getTermCount:n,getProcessedTermCount:a}=e;const[r,l]=i.a.useState(),[c,s]=i.a.useState();return i.a.useEffect((()=>{if(0===t.termCount){if(!r){const e=window.setInterval((()=>{n(t.id)}),2e3);l(e)}}else clearInterval(r)}),[n,r,t.id,t.termCount]),i.a.useEffect((()=>()=>{clearInterval(r),clearInterval(c)}),[c,r]),i.a.useEffect((()=>{if(t.processedTermCount<t.termCount){if(!c){const e=window.setInterval((()=>{a(t.id)}),2e3);s(e)}}else clearInterval(c)}),[a,c,r,t.id,t.processedTermCount,t.termCount]),0===t.termCount?Object(m.jsx)("span",{style:{backgroundColor:"#FF0101"},children:"Processing"}):t.termCount===t.processedTermCount?Object(m.jsx)("span",{style:{backgroundColor:"#009700"},children:"Done"}):Object(m.jsx)("span",{style:{backgroundColor:"#5AB7D4"},children:"".concat(t.processedTermCount,"/").concat(t.termCount,"(").concat(Math.floor(100*t.processedTermCount/t.termCount),"%)")})}));var de=Object(c.b)(null,{loadTermCounts:o.y})((e=>{let{value:t,record:n,loadTermCounts:a}=e;if(i.a.useEffect((()=>{null===t&&a(n.id)}),[a,n.id,t]),i.a.useEffect((()=>{(void 0===t||0===n.termCount||n.processedTermCount<n.termCount)&&a(n.id)}),[null===n||void 0===n?void 0:n.processedTermCount,n.id,n.termCount,t,a]),!t)return Object(m.jsx)("span",{children:"-"});let r=0;return Object.keys(t).map((e=>(e!==le.c.Skipped&&(r+=t[e]),null))),Object(m.jsx)("span",{children:r})})),ue=n(425),ge=n.n(ue);U.a.extend(N.a),U.a.extend(M.a);const je=(e,t)=>{const n=t.find((t=>t.code===e));return n?n.name:"Unknown language"},be=()=>Object(m.jsx)("div",{style:{width:"100%",padding:"10px 0",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(m.jsx)(A.a,{})});var xe=Object(c.b)((e=>({texts:e.text.texts,filters:e.text.filters,page:e.text.page,itemPerPage:e.text.itemPerPage,total:e.text.total,languages:e.language.languages})),{getTexts:o.w,getLanguages:s.c,deleteText:o.p,getTermCount:o.y})((e=>{let{isLoading:t,languages:n,onEdit:a,texts:r}=e;return Object(m.jsx)(P.a,{component:f.a,children:t?Object(m.jsx)(be,{}):Object(m.jsxs)(I.a,{children:[Object(m.jsx)(K.a,{children:Object(m.jsxs)(B.a,{children:[Object(m.jsx)(F.a,{children:"Title"}),Object(m.jsx)(F.a,{children:"C"}),Object(m.jsx)(F.a,{children:"P"}),Object(m.jsx)(F.a,{children:"UK"}),Object(m.jsx)(F.a,{children:"WK"}),Object(m.jsx)(F.a,{children:"Act"}),Object(m.jsx)(F.a,{children:"L1"}),Object(m.jsx)(F.a,{children:"L2"}),Object(m.jsx)(F.a,{children:"L3"}),Object(m.jsx)(F.a,{children:"L4"}),Object(m.jsx)(F.a,{children:"L5"}),Object(m.jsx)(F.a,{children:"Status"}),Object(m.jsx)(F.a,{children:"Language"}),Object(m.jsx)(F.a,{children:"I"}),Object(m.jsx)(F.a,{children:"T"})]})}),Object(m.jsx)(S.a,{children:r.map((e=>Object(m.jsxs)(B.a,{children:[Object(m.jsx)(F.a,{children:Object(m.jsx)("div",{className:ge.a.title,style:{maxHeight:"5rem",display:"flex",justifyContent:"center",overflow:"scroll",scrollbarWidth:"none"},children:e.title})}),Object(m.jsx)(F.a,{align:"center",children:U.a.utc(e.createdAt).fromNow()}),Object(m.jsx)(F.a,{children:Object(m.jsx)(ne,{text:e})}),Object(m.jsx)(F.a,{children:Object(m.jsx)(se,{text:e,learningLevel:le.c.UnKnow})}),Object(m.jsx)(F.a,{children:Object(m.jsx)(se,{text:e,learningLevel:le.c.WellKnow})}),Object(m.jsx)(F.a,{align:"center",style:{padding:0},children:Object(m.jsx)(ee,{text:e,onEdit:a})}),Object(m.jsx)(F.a,{children:Object(m.jsx)(se,{text:e,learningLevel:le.c.Learning1})}),Object(m.jsx)(F.a,{children:Object(m.jsx)(se,{text:e,learningLevel:le.c.Learning2})}),Object(m.jsx)(F.a,{children:Object(m.jsx)(se,{text:e,learningLevel:le.c.Learning3})}),Object(m.jsx)(F.a,{children:Object(m.jsx)(se,{text:e,learningLevel:le.c.Learning4})}),Object(m.jsx)(F.a,{children:Object(m.jsx)(se,{text:e,learningLevel:le.c.Learning5})}),Object(m.jsx)(F.a,{children:Object(m.jsx)(oe,{text:e})}),Object(m.jsx)(F.a,{children:je(e.languageCode,n)}),Object(m.jsx)(F.a,{children:e.counts?e.counts[le.c.Ignored]:"-"}),Object(m.jsx)(F.a,{children:Object(m.jsx)(de,{value:e.counts,record:e})})]},e.id)))})]})})}));const me=e=>{let{filters:t,total:n,history:l,page:c,location:s,itemPerPage:o,getLanguages:d,getTexts:u}=e;const[g,j]=i.a.useState(!1),[b,h]=i.a.useState(!1),[O,C]=i.a.useState(!1),[p,f]=i.a.useState(null),L=(e=>{if(!e)return{};if("?"!==e[0])throw Error("Invalid query string");const t=e.substr(1).split("&"),n={};return t.forEach((e=>{const[t,a]=e.split("=");n[t]=a})),n})(s.search);i.a.useEffect((()=>{L.page?E(t,parseInt(L.page,10),o):E(t,1,o),d()}),[]);const E=i.a.useCallback(((e,t,n)=>{C(!0),u(e,t,n).then((()=>{C(!1)}))}),[u]),_=i.a.useCallback((e=>{C(!0),u(t,e,o).then((()=>{C(!1)}))}),[t,u,o]);let T=parseInt(L.page,10);Number.isNaN(T)&&(T=1),Object(x.a)((()=>{_(T)}),[T,_]);const y=i.a.useCallback((e=>{E(e,1,o)}),[o,E]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(k,{hide:()=>{h(!1)},onEdit:()=>{y(),f(null)},editingText:p,visible:b}),Object(m.jsx)(w,{hide:()=>{j(!1)},visible:g,onCreate:y}),Object(m.jsx)(a.a,{color:"primary",variant:"contained",onClick:()=>{j(!0)},children:"Add text"}),Object(m.jsx)(v,{onFilterChange:y,values:t}),Object(m.jsx)(xe,{isLoading:O,onEdit:e=>{f(e),h(!0)}}),Object(m.jsx)(r.a,{count:Math.ceil(n/10),page:c,onChange:(e,t)=>{l.push("/text?page=".concat(t.toString()))}})]})};me.defaultProps={filters:{title:"",languageCode:""}};var he=Object(c.b)((e=>({texts:e.text.texts,filters:e.text.filters,page:e.text.page,itemPerPage:e.text.itemPerPage,total:e.text.total,languages:e.language.languages})),{getTexts:o.w,getLanguages:s.c,deleteText:o.p,getTermCount:o.y})(me);t.default=he}}]);
//# sourceMappingURL=8.e41331af.chunk.js.map
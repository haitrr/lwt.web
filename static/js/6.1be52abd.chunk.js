(this["webpackJsonplwt.web"]=this["webpackJsonplwt.web"]||[]).push([[6],{261:function(e,n,t){"use strict";t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return l})),t.d(n,"b",(function(){return c})),t.d(n,"d",(function(){return s})),t.d(n,"e",(function(){return d})),t.d(n,"f",(function(){return g})),t.d(n,"h",(function(){return u})),t.d(n,"g",(function(){return m}));var r=t(274),a=t.n(r);const i={Skipped:"skipped",Ignored:"ignored",UnKnow:"unknown",Learning1:"learning-1",Learning2:"learning-2",Learning3:"learning-3",Learning4:"learning-4",Learning5:"learning-5",WellKnow:"well-known"},o=[i.UnKnow,i.Learning1,i.Learning2,i.Learning3,i.Learning4,i.Learning5],l={English:"en"},c={[i.Skipped]:a.a.termSkipped,[i.Ignored]:a.a.termIgnored,[i.UnKnow]:a.a.termUnknown,[i.Learning1]:a.a.termLearning1,[i.Learning2]:a.a.termLearning2,[i.Learning3]:a.a.termLearning3,[i.Learning4]:a.a.termLearning4,[i.Learning5]:a.a.termLearning5,[i.WellKnow]:a.a.termWellKnown},s={[i.Skipped]:"S",[i.Ignored]:"I",[i.UnKnow]:"UK",[i.Learning1]:"I",[i.Learning2]:"II",[i.Learning3]:"II",[i.Learning4]:"IV",[i.Learning5]:"V",[i.WellKnow]:"WK"},d=e=>{switch(e){case i.UnKnow:return i.Learning1;case i.Learning1:return i.Learning2;case i.Learning2:return i.Learning3;case i.Learning3:return i.Learning4;case i.Learning4:return i.Learning5;case i.Learning5:return i.WellKnow;default:return e}},g=e=>{switch(e){case i.UnKnow:return i.Ignored;case i.Learning1:return i.UnKnow;case i.Learning2:return i.Learning1;case i.Learning3:return i.Learning2;case i.Learning4:return i.Learning3;case i.Learning5:return i.Learning4;case i.WellKnow:return i.Learning5;default:return e}},u=e=>o.includes(e),m=["#E50027","#E5000F","#E50800","#E52000","#E53800","#E55000","#E56800","#E68000","#E69701","#E6AF01","#E6C701","#E6DF01","#D6E601","#BEE701","#A7E701","#8FE702","#77E702","#60E702","#48E702","#31E802","#19E802","#02E803","#03E81B","#03E833","#03E84B","#03E963","#03E97B","#03E993","#03E9AB","#04E9C3","#04E9DB","#04E0EA","#04C9EA","#04B1EA","#0499EA","#0482EA","#056AEA","#0553EB","#053BEB","#0523EB","#050CEB","#1705EB","#2F05EB","#4706EC","#5F06EC","#7706EC","#8F06EC","#A706EC","#BF06EC","#D707ED"]},270:function(e,n,t){"use strict";var r=t(389),a=(t(0),t(263)),i=t.n(a),o=t(284),l=t.n(o),c=t(3);n.a=e=>{let{color:n,className:t}=e;const a=i()(l.a.loading,t);return Object(c.jsx)("div",{className:a,children:Object(c.jsx)(r.a,{color:n})})}},274:function(e,n,t){e.exports={term:"Term_term__2-NZg",termCount:"Term_termCount__DM8Pp",termIgnored:"Term_termIgnored__1hr4Y",termSkipped:"Term_termSkipped__KPHim",termUnknown:"Term_termUnknown__1mQqj",termLearning1:"Term_termLearning1__y3Qmv",termLearning2:"Term_termLearning2__1Z9Ke",termLearning3:"Term_termLearning3__2rFg-",termLearning4:"Term_termLearning4__2oG1C",termLearning5:"Term_termLearning5__1dCC7",termWellKnown:"Term_termWellKnown__2X013",termLearned:"Term_termLearned__1HaXE",termLearning:"Term_termLearning__3OKz8",bookmark:"Term_bookmark__2vKqX"}},278:function(e,n,t){"use strict";var r=t(578),a=t(572),i=t(569),o=t(253),l=(t(0),t(263)),c=t.n(l),s=t(39),d=t(283),g=t.n(d),u=t(3);n.a=Object(s.b)((e=>({languages:e.language.languages})))((e=>{let{languages:n,value:t="",onChange:l,disabled:s=!1,className:d,name:m}=e;const x=c()(d,g.a.select);return Object(u.jsxs)(r.a,{variant:"outlined",className:x,children:[Object(u.jsx)(a.a,{id:"language-select-label",children:"Language"}),Object(u.jsx)(i.a,{labelId:"language-select-label",onChange:l,label:"Language",value:t,color:"primary",name:m,disabled:s||!1,children:n.map((e=>Object(u.jsx)(o.a,{value:e.code,children:e.name},e.code)))})]})}))},283:function(e,n,t){e.exports={select:"LanguageSelect_select__2dF_z"}},284:function(e,n,t){e.exports={loading:"Loading_loading__2W7Py"}},294:function(e,n,t){"use strict";var r=t(0);n.a=(e,n)=>{const t=Object(r.useRef)(!1);Object(r.useEffect)((()=>{t.current?e():t.current=!0}),n)}},296:function(e,n,t){e.exports={readPane:"TextReadPage_readPane__2TSOs",titleSection:"TextReadPage_titleSection__35_to",contentPanel:"TextReadPage_contentPanel__9PD7z",loading:"TextReadPage_loading__3LVKY",progress:"TextReadPage_progress__2_53X",done:"TextReadPage_done__1_ILJ",termEditForm:"TextReadPage_termEditForm__jOZSl"}},316:function(e,n,t){"use strict";var r=t(278);n.a=r.a},346:function(e,n,t){e.exports={form:"TermEditForm_form__1dvye",buttons:"TermEditForm_buttons__3MX29",content:"TermEditForm_content__3rmo6",title:"TermEditForm_title__2rdE8",language:"TermEditForm_language__g2PvW",meaning:"TermEditForm_meaning__FYuOM",saveButton:"TermEditForm_saveButton___s4X8"}},347:function(e,n,t){e.exports={select:"LearningLevelSelect_select__3u6MF",container:"LearningLevelSelect_container__EtMtz",option:"LearningLevelSelect_option__qj0uW",selected:"LearningLevelSelect_selected__RSvhT"}},431:function(e,n,t){e.exports={meaning:"Title_meaning__2li-J"}},432:function(e,n,t){e.exports={button:"GoToBookmarkButton_button__35DdT",icon:"GoToBookmarkButton_icon__3S2yj"}},434:function(e,n,t){e.exports={bar:"SingleBarChart_bar__2oalE",section:"SingleBarChart_section__3rM48"}},565:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(39),o=t(32),l=t(41),c=t(296),s=t.n(c),d=t(387),g=t(254),u=t(24),m=t(426),x=t(346),b=t.n(x),v=t(261),j=t(3);var h=e=>{var n;let{term:t}=e;return Object(j.jsx)(m.CopyToClipboard,{text:t.content,onCopy:()=>{u.b.info("Copied to clipboard.",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},children:Object(j.jsx)("div",{className:b.a.title,style:{color:v.g[Math.min(t.count,49)]},children:"".concat(t.content,"(").concat(null!==(n=t.count)&&void 0!==n?n:"-",")")})})},L=t(347),T=t.n(L),p=t(263),k=t.n(p);var f=e=>{let{onClick:n,className:t,children:r,selected:a}=e;const i=k()(t,T.a.option,{[T.a.selected]:a});return Object(j.jsx)("div",{role:"button",tabIndex:-1,onKeyDown:n,onClick:n,className:i,children:r})};const _=[v.c.UnKnow,v.c.Learning1,v.c.Learning2,v.c.Learning3,v.c.Learning4,v.c.Learning5,v.c.WellKnow,v.c.Ignored].map((e=>({value:e,className:v.b[e],label:v.d[e]})));var O=e=>{let{onChange:n,value:t}=e;return Object(j.jsx)("div",{className:T.a.container,children:_.map((e=>Object(j.jsx)(f,{className:e.className,selected:e.value===t,onClick:()=>{return t=e.value,void n(t);var t},children:e.label},e.value)))})},E=t(430);var w=(e,n)=>{if("en"===n){const n=Object(E.a)(e);return n.normalize({whitespace:!0,case:!0,punctuation:!0,unicode:!0,contractions:!1,acronyms:!0,parentheses:!1,possessives:!0,plurals:!0,verbs:!0,honorifics:!1}),n.toLowerCase(),n.out()}return e},C=t(316);const y=e=>{if(!e.text.readingText)throw new Error("not reading text");return e.text.readingText.terms[e.term.editingTerm]},B=e=>{var n,t;if(!e.text.readingText)throw new Error("not reading text");const r=null===(n=e.user)||void 0===n||null===(t=n.setting)||void 0===t?void 0:t.languageSettings.find((n=>n.languageCode===e.text.readingText.languageCode));if(!r)throw new Error("language not found");return r.dictionaryLanguageCode},I=e=>{const n=a.a.useRef();return a.a.useEffect((()=>{n.current=e})),n.current};var S=t(280);var N=Object(i.b)((e=>{if(!e.text.readingText)throw new Error("not reading text");return{value:{...y(e)},dictionaryLanguage:B(e),editingTerm:e.term.editingTerm,languageCode:e.text.readingText.languageCode,languages:e.language.languages,index:e.term.editingTerm}}),{setEditingTerm:l.m,createTerm:l.i,editTerm:l.k,dictionaryTerm:l.j})((e=>{let{value:n,dictionaryLanguage:t,languages:r,languageCode:i,dictionaryTerm:o,editingTerm:l,editTerm:c,createTerm:s,setEditingTerm:u,className:m,index:x}=e;const L=a.a.createRef(),[T,p]=a.a.useState({lookingUpDictionary:!1,lookedUpDictionary:!1}),k=I({index:x,value:n});a.a.useEffect((()=>{if(x!==(null===k||void 0===k?void 0:k.index)&&p({...T,lookedUpDictionary:!1}),n.content&&""===n.meaning&&!T.lookedUpDictionary){const{code:e}=r.find((e=>e.code===i));p({lookedUpDictionary:!0,lookingUpDictionary:!0}),o(w(n.content,e),i,t,x).finally((()=>p({...T,lookingUpDictionary:!1})))}var e;n.index!==(null===k||void 0===k?void 0:k.value.index)?L.current&&(null===(e=L.current)||void 0===e||e.setValues({...n})):n.meaning!==(null===k||void 0===k?void 0:k.value.meaning)&&L.current&&L.current.setValues({...L.current.values,meaning:n.meaning})}),[x,null===n||void 0===n?void 0:n.content,null===n||void 0===n?void 0:n.meaning]);const f=e=>{const t={...n,...e};n.id?c(t):s(t),u(null)},_=e=>{var n;const t=L.current.values;e.preventDefault();const r={...t,learningLevel:Object(v.e)(t.learningLevel)};null===(n=L.current)||void 0===n||n.setValues(r),f(r)},E=()=>T.lookingUpDictionary||n.learningLevel!==v.c.UnKnow&&null===n.meaning;return null!=l&&n?Object(j.jsx)(S.d,{initialValues:n,onSubmit:f,innerRef:L,children:e=>{let{values:t,handleChange:r,setFieldValue:a,handleBlur:o}=e;return Object(j.jsx)(S.c,{children:Object(j.jsxs)("div",{className:"".concat(m," ").concat(b.a.form),children:[Object(j.jsx)(h,{term:n}),Object(j.jsx)(S.b,{className:b.a.content,label:"Content",name:"content",component:d.a,value:t.content}),Object(j.jsx)(S.b,{className:b.a.language,name:"languageCode",value:i,component:C.a,disabled:!0}),Object(j.jsx)(S.b,{name:"meaning",value:t.meaning,onChange:r,onBlur:o,children:e=>{let{field:n}=e;return Object(j.jsx)(d.a,{variant:"outlined",InputProps:{classes:{input:b.a.meaning}},InputLabelProps:{shrink:!0},label:"Meaning",value:n.value,disabled:E(),onChange:n.onChange,name:n.name,onBlur:n.onBlur,fullWidth:!0,minRows:2,maxRows:5,multiline:!0},"meaning")}}),Object(j.jsx)(S.b,{name:"learningLevel",initialValue:n.learningLevel,onBlur:o,value:t.learningLevel,className:b.a.learningLevel,onChange:e=>{a("learningLevel",e)},component:O}),Object(j.jsxs)("div",{className:b.a.buttons,children:[Object(j.jsx)("div",{className:b.a.saveButton,children:Object(j.jsx)(g.a,{color:"primary",variant:"contained",onClick:_,disabled:E(),className:b.a.saveButton,children:"Better"})}),Object(j.jsx)("div",{className:b.a.saveButton,children:Object(j.jsx)(g.a,{color:"primary",variant:"contained",type:"submit",disabled:E(),className:b.a.saveButton,children:"Save"})})]})]})})}}):null})),K=t(274),M=t.n(K);const P="last-begin-index";var D=Object(i.b)(((e,n)=>{if(!e.text.readingText)throw new Error;return{id:e.text.readingText.id,isLastBeginIndex:e.text.readingText.termLastBeginIndex===n.term.index}}),{setBookmark:o.B,selectTerm:o.A})((e=>{let{setBookmark:n,id:t,bookmark:r,isLastBeginIndex:i,selectTerm:o,term:l,onClick:c}=e;const s=a.a.useRef(null),d=e=>{o(l.index),n(t,l.index),c(e)},g=k()(M.a.term,v.b[l.learningLevel],{[M.a.bookmark]:r,[M.a.termCount]:l.count&&Object(v.h)(l.learningLevel)});let u;r?u="bookmark":i&&(u=P);const m=l.count&&Object(v.h)(l.learningLevel)?{borderBottomColor:v.g[Math.min(l.count,49)]}:void 0;return Object(j.jsx)("span",{tabIndex:-1,role:"button",id:u,className:g,style:m,ref:s,onClick:d,onKeyDown:d,children:l.content})})),F=t(564);var U=e=>{let{onMouseEnter:n,onMouseLeave:t,bookmark:r,term:a,onClick:i}=e;return Object(j.jsx)("span",{onMouseEnter:n,onMouseLeave:t,children:Object(j.jsx)(D,{bookmark:r,term:a,onClick:i})})},W=t(590),R=t(258),V=t(431),A=t.n(V);var z=e=>{let{term:n}=e;return Object(j.jsxs)("span",{children:[n.count?Object(j.jsx)("div",{style:{color:v.g[Math.min(n.count,49)]},children:"".concat(n.count," in this text.")}):Object(j.jsx)("div",{children:"Loading term count"}),Object(j.jsx)("hr",{}),Object(j.jsx)("div",{className:A.a.meaning,children:n.meaning}),Object(j.jsx)("hr",{})]})};var H=e=>{let{term:n,loading:t,better:r,worse:a}=e;return Object(j.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(j.jsx)(g.a,{variant:"contained",color:"primary",onClick:r,disabled:null===n.meaning||t,children:"Better"}),Object(j.jsx)(g.a,{variant:"contained",color:"primary",style:{marginLeft:"5px"},onClick:a,disabled:null===n.meaning||t,children:"Worse"})]})};var G=e=>{let{onMouseLeave:n,onMouseEnter:t,term:r,better:a,worse:i,loading:o}=e;return Object(j.jsx)(W.a,{p:2,onMouseEnter:t,onMouseLeave:n,style:{maxWidth:"30vw"},children:Object(j.jsxs)(R.a,{style:{padding:"1rem"},children:[Object(j.jsx)(z,{term:r}),Object(j.jsx)(H,{term:r,loading:o,better:a,worse:i})]})})};var X=Object(i.b)((e=>{if(!e.text.readingText)throw new Error("not reading text");return{dictionaryLanguage:B(e),readingLanguageCode:e.text.readingText.languageCode,textId:e.text.readingText.id}}),{editTerm:l.k,dictionaryTerm:l.j,setBookmark:o.B,setSelectingTerm:o.A})((e=>{let{term:n,bookmark:t,onSpeak:i,onClick:o,onHover:l,dictionaryLanguage:c,readingLanguageCode:s,textId:d,dictionaryTerm:g,index:u,setBookmark:m,setSelectingTerm:x,editTerm:b}=e;const[h,L]=Object(r.useState)(!1),[T,p]=Object(r.useState)(!1),[k,f]=Object(r.useState)(null),_=()=>{m(d,u),x(u)},O=a.a.useRef(void 0),E=a.a.useRef(void 0),C=a.a.useRef(void 0),y=a.a.useRef(void 0),B=()=>{O.current=setTimeout((()=>{f(null)}),100),clearTimeout(y.current),clearTimeout(C.current)},I=Boolean(k);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(U,{onMouseEnter:e=>{clearTimeout(O.current),clearTimeout(E.current),f(e.currentTarget),n&&!T&&""===n.meaning&&(C.current=setTimeout((()=>{n&&!T&&""===n.meaning&&(L(!0),p(!0),g(w(n.content,s),s,c,u).then((()=>L(!1))))}),100)),y.current=setTimeout(l,100)},onMouseLeave:B,bookmark:t,term:n,onClick:o}),Object(j.jsx)(F.a,{open:I,anchorEl:k,style:{whiteSpace:"pre-line"},placement:"top",children:Object(j.jsx)(G,{onMouseEnter:()=>{clearTimeout(O.current),clearTimeout(E.current)},onMouseLeave:B,term:n,loading:h,better:()=>{const e={...n,learningLevel:Object(v.e)(n.learningLevel)};b(e),_()},worse:()=>{const e={...n,learningLevel:Object(v.f)(n.learningLevel)};b(e),_()}})})]})}));var J=e=>{let{term:n,isLastBeginTerm:t}=e;return Object(j.jsx)("span",{className:M.a.term,id:t?P:void 0,children:n.content})};const q=e=>{let{term:n,setEditingTerm:t,getTermMeaning:r,index:a,getTermCountInText:i,textId:o,onSpeak:l,bookmark:c,isLastBeginIndex:s}=e;const d=()=>{n.id&&!n.count&&i(n.id,o)},g=()=>{n.id&&void 0===n.meaning&&n.learningLevel!==v.c.Ignored&&n.learningLevel!==v.c.Skipped&&n.learningLevel!==v.c.WellKnow&&r(n,a)},u=e=>{e.preventDefault(),n.count||d(),null===n.meaning&&r(n,a),l(n),t(a)};return n.learningLevel===v.c.Skipped?Object(j.jsx)(J,{term:n,isLastBeginTerm:s}):n.learningLevel===v.c.WellKnow||n.learningLevel===v.c.Ignored||window.innerWidth<768?Object(j.jsx)(D,{bookmark:c,term:n,onClick:u}):Object(j.jsx)(X,{onClick:u,onHover:()=>{null===n.meaning&&g(),n.count||d(),l(n)},onSpeak:l,index:a,term:n,bookmark:c})};var Y=Object(i.b)(((e,n)=>{if(!e.text.readingText)throw new Error;return{term:e.text.readingText.terms[n.index],bookmark:e.text.readingText.bookmark===n.index,isLastBeginIndex:e.text.readingText.termLastBeginIndex===n.index,textId:e.text.readingText.id}}),{setEditingTerm:l.m,getTermMeaning:l.l,getTermCountInText:o.t})(a.a.memo(q,((e,n)=>{const{term:t,bookmark:r,isLastBeginIndex:a}=e;return!(n.term.learningLevel!==t.learningLevel||n.term.meaning!==t.meaning||n.term.count!==t.count||n.bookmark!==r||a!==n.isLastBeginIndex)})));const Z=e=>{let{current:n,total:t}=e;return Object(j.jsx)("div",{className:s.a.progress,children:Object(j.jsx)("div",{style:{height:"".concat(100*n/t,"%")},className:s.a.done})})};Z.defaultProps={current:0};var Q=Object(i.b)((e=>{if(!e.text.readingText)throw new Error;return{current:e.text.readingText.viewingTermIndex,total:e.text.readingText.termCount}}))(Z),$=t(591),ee=t(432),ne=t.n(ee);var te=Object(i.b)((e=>{if(!e.text.readingText)throw new Error;return{current:e.text.readingText.bookmark,total:e.text.readingText.termCount}}))((e=>{let{onClick:n,current:t,total:r}=e;return Object(j.jsx)($.a,{title:"Go to bookmark",type:"button",color:"secondary",className:ne.a.button,onClick:n,children:"".concat(Math.round(t/r*100*100)/100,"%")})})),re=t(270),ae=t(433);let ie;var oe=Object(i.b)(null,{setViewingTerm:o.E})((e=>{let{index:n,children:t,setViewingTerm:r}=e;const{ref:a,inView:i}=Object(ae.a)({threshold:0});return i&&((e,n)=>{ie&&clearTimeout(ie),ie=setTimeout((()=>{e(n)}),200)})(r,n),Object(j.jsx)("span",{ref:a,children:t})})),le=t(294);let ce,se,de;var ge=Object(i.b)((e=>{if(!e.text.readingText)throw new Error("not reading text");return{terms:e.text.readingText.terms,begin:e.text.readingText.termIndexBegin,end:e.text.readingText.termIndexEnd,termCount:e.text.readingText.termCount,editingTerm:e.term.editingTerm}}),{getTextTerms:o.v,setTermIndexBegin:o.C,setTermIndexEnd:o.D,setEditingTerm:l.m,setViewingTerm:o.E})((e=>{let{end:n,setTermIndexEnd:t,begin:r,termCount:i,getTextTerms:o,textId:l,terms:c=[],editingTerm:d=null,setEditingTerm:g,onSpeak:u,setTermIndexBegin:m}=e;a.a.useEffect((()=>{window.innerWidth>700?(ce=1e3,de=300):(ce=750,de=150),m(Math.max(r-Math.floor(ce/2),0)),t(Math.min(n+ce,i-1))}),[]);const x=a.a.createRef(),[b,v]=a.a.useState(!0),h=I({begin:r,terms:c,end:n});Object(le.a)((()=>{void 0!==(null===h||void 0===h?void 0:h.begin)&&r<(null===h||void 0===h?void 0:h.begin)&&o(l,r,null===h||void 0===h?void 0:h.begin),(null===h||void 0===h?void 0:h.terms[r])!==c[r]&&L()}),[r,h,o,c,l]),Object(le.a)((()=>{void 0!==(null===h||void 0===h?void 0:h.end)&&n>h.end&&o(l,h.end,n)}),[n,l,h,o]),a.a.useEffect((()=>{if(c[r]&&c[n]&&b){v(!1);const e=document.getElementById("bookmark");e&&e.scrollIntoView({block:"center"})}}),[c,r,n,b]);const L=()=>{const e=document.getElementById(P);e?(e.scrollIntoView(),se=!1):se=!0};if((!c[r]||!c[n])&&b)return Object(j.jsx)("div",{style:{height:"50%"},children:Object(j.jsx)(re.a,{})});const T=[];for(let a=r;a<=n;a+=1)c[a]&&(a%50===0?T.push(Object(j.jsx)(oe,{index:a,children:Object(j.jsx)(Y,{onSpeak:u,index:a},a)})):T.push(Object(j.jsx)(Y,{onSpeak:u,index:a},a)));return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{onScroll:e=>{if(e.stopPropagation(),e.preventDefault(),"contentPanel"!==e.target.id)return;if(d&&g(null),!c[r]||!c[n])return;if(se)return void L();if(e.target.scrollTop<100&&r>0)return void m(Math.max(r-de,0));e.target.scrollHeight-e.target.scrollTop<e.target.clientHeight+100&&n<i-1&&t(Math.min(n+de,i-1))},id:"contentPanel",className:s.a.contentPanel,ref:x,children:[!c[r]&&Object(j.jsx)(re.a,{className:s.a.loading}),T,!c[n]&&Object(j.jsx)(re.a,{className:s.a.loading}),Object(j.jsx)(Q,{})]}),!d&&Object(j.jsx)(te,{onClick:()=>{const e=document.getElementById("bookmark");e&&e.scrollIntoView({block:"center",behavior:"smooth"})}})]})})),ue=t(434),me=t.n(ue);var xe=e=>{let{data:n}=e;const t=n.map((e=>e.value)).reduce(((e,n)=>e+n));return Object(j.jsx)("span",{className:"".concat(me.a.bar),children:n.map((e=>((e,n)=>{const t=k()(me.a.section,e.color);return 0!==e.value?Object(j.jsxs)("span",{className:t,style:{paddingLeft:"0.2rem",paddingRight:"0.2rem",height:"100%",flex:e.value,display:"flex",justifyContent:"center",flexDirection:"column",textAlign:"center"},children:[Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",height:"0.85rem"},children:e.value}),Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",height:"0.85rem"},children:"(".concat(Math.round(1e4*e.value/n)/100,"%)")})]},e.name):null})(e,t)))})};var be=Object(i.b)((e=>{if(null==e.text.readingText)throw new Error("not reading text");return{textId:e.text.readingText.id,terms:e.text.readingText.terms,termsCountByLearningLevel:e.text.readingText.termsCountByLearningLevel,bookmark:e.text.readingText.bookmark,termCount:e.text.readingText.termCount}}),{loadTermsCountByLearningLevel:o.x})((e=>{var n,t;let{loadTermsCountByLearningLevel:r,termCount:i,termsCountByLearningLevel:o,textId:l,terms:c,bookmark:s}=e;a.a.useEffect((()=>{r(l)}),[r,l]);const d=I({bookmark:s,terms:c}),g=null===(n=c[s])||void 0===n?void 0:n.learningLevel,u=null===d||void 0===d||null===(t=d.terms[d.bookmark])||void 0===t?void 0:t.learningLevel;if(a.a.useEffect((()=>{s===(null===d||void 0===d?void 0:d.bookmark)&&c[s]&&d.terms[s]&&g!==u&&r(l)}),[c,g,u,s,d,l,r]),!o)return Object(j.jsx)("div",{style:{height:"2rem"},children:Object(j.jsx)(re.a,{})});const m=o,x=[],b=[];Object.keys(v.c).forEach((e=>{"Skipped"!==e&&"Ignored"!==e&&"WellKnow"!==e&&x.push({name:e,value:m[v.c[e]],color:v.b[v.c[e]]})}));const h=function(e,n){return e-n[v.c.Skipped]-n[v.c.Ignored]-n[v.c.WellKnow]}(i,m);return b.push({name:"Learned",color:M.a.termLearned,value:m[v.c.WellKnow]}),b.push({name:"Learning",color:M.a.termLearning,value:h}),Object(j.jsxs)("div",{style:{width:"100%"},children:[Object(j.jsx)(xe,{data:b}),Object(j.jsx)(xe,{data:x})]})}));var ve=Object(i.b)((e=>{if(!e.text.readingText)throw new Error;return{title:e.text.readingText.title}}))((e=>{let{title:n}=e;return window.innerWidth>700?Object(j.jsx)("div",{className:s.a.titleSection,children:n}):null}));const je=e=>{let{readText:n,match:t,setEditingTerm:i,languages:o,language:l,id:c,bookmark:d,terms:g}=e;const{params:{textId:u}}=t;Object(r.useEffect)((()=>(n(u),()=>{i(null)})),[u,n,i]);const[m]=a.a.useState(new SpeechSynthesisUtterance),x=I({language:l,languages:o});Object(r.useEffect)((()=>()=>{((null===x||void 0===x?void 0:x.languages)!==o||!(null===x||void 0===x?void 0:x.language)||!x.languages||x.language!==l)&&b()}));const b=()=>{if(l&&o){const e=o.find((e=>e.code===l)),n=window.speechSynthesis.getVoices();if(e)if(m.lang=e.speakCode,"zh-CN"===e.speakCode){const t=n.find((e=>"Google\xa0\u666e\u901a\u8bdd\uff08\u4e2d\u56fd\u5927\u9646\uff09"===e.name));m.voice=t||(n.find((n=>n.lang===e.speakCode))||null)}else if("en-US"===e.speakCode){const t=n.find((e=>"Google US English"===e.name));m.voice=t||(n.find((n=>n.lang===e.speakCode))||null)}}};window.speechSynthesis.onvoiceschanged=b;return c?Object(j.jsxs)("div",{className:s.a.readPane,id:"readPanel",children:[Object(j.jsx)(ve,{}),Object(j.jsx)(be,{}),Object(j.jsx)(ge,{onSpeak:e=>{m.text=e.content,window.speechSynthesis.cancel(),window.speechSynthesis.speak(m)},textId:c}),g&&Object(j.jsx)(N,{className:s.a.termEditForm})]}):Object(j.jsx)(re.a,{})};var he=Object(i.b)((e=>e.text.readingText?{terms:e.text.readingText.terms,language:e.text.readingText.languageCode,id:e.text.readingText.id,languages:e.language.languages,bookmark:e.text.readingText.bookmark}:{languages:e.language.languages}),{readText:o.z,setEditingTerm:l.m})(a.a.memo(je,((e,n)=>{const{terms:t,id:r,language:a,languages:i}=e;return!(t!==n.terms||r!==n.id||i!==n.languages||a!==n.language)})));n.default=he}}]);
//# sourceMappingURL=6.1be52abd.chunk.js.map